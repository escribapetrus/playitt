{% extends "../layout.html" %}
{% load static %}
{% block title %}
Playlists - {{object.title}}
{% endblock %}
{% block content %}
<div class="playlists-detail">
    <section class="header">
        <div class="text">
            <h1>{{object.title}}</h1>
            <a href="{% url 'playlists-user-list' object.user.username %}"><h4>created by {{object.user.username}}</h4></a>
        </div>
        <div class="buttons">
            {%if user == object.user%}
            
            {% else %}
            <form action="{% url 'users-addtofav' object.id %}" method="post">
                {% csrf_token %}
                <button type="submit">Add to favorites</button>
            </form>
            {%endif%}
        </div>     
    </section>

    <section class="content">
        <div class="list" id="vue-playlist">            
            <div class="tracklist">
                <h3>Tracklist</h3>
                <ol>
                    <vtracklist 
                        v-for="s in songs"
                        v-bind:key="s.title"
                        v-bind:title='s.title'
                        v-bind:album='s.album'
                        v-bind:artist='s.artist'>                            
                    </vtracklist>
                </ol>             
            </div>                        
            <article>
                <vpldescription :description="description" :genres="genres"></vpldescription>
                {% if user == object.user%}
                <vsongadder @added="getSongs"></vsongadder>
                {% endif %} 
            </article>
        </div>    
        <section id="vue-comments" class="comments">
            <h3>comments</h3>       
            <vaddcomment @added="getComments">                
            </vaddcomment>
            <span>to join the discussion, <a href="{% url 'login' %}">login</a> or <a href="{% url 'users-create' %}">create an account.</a></span>

            <vcommentlist 
                v-for="c in comments"
                :text="c.fields.text"
                :user="c.fields.user[0]"
                :comment_date="c.fields.comment_date">
            </vcommentlist>
        </section>
    </section>  
</div>

<script src="{% static 'vue/playlist_tracklist.js' %}"></script>
<script src="{% static 'vue/playlist_comments.js' %}"></script>

{% endblock %}


